<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf8" >
		<script src="Objetos2.js" ></script>
		<link rel="stylesheet" type="text/css" href="css/style.css" />
		<script>

		async function workSpace () {		
			var selector = new ElementSelector({
				title: "//ol[@id='searchResults']/li//h2/a/span/text()",
				price: "//ol[@id='searchResults']/li//span[@class='price-fraction']/text()",
				url:   "//ol[@id='searchResults']/li//a[@class='item__info-title']/@href",
				img:   "//ol[@id='searchResults']/li//div[@class='images-viewer']//img"
			});
				
			var collection = new ElementCollection(selector);
			//console.log(collection);

			var paginator = new ElementPaginator("//ul[@class='ch-pagination']");
			
			var es = new ElementSearch("pokemon", "http://www.mercadolibre.com.ar", {elementSelector: selector, elementPaginator: paginator}, "//input[@class='nav-search-input']");

			var ec = await es.search();


			for (var i = ec.length()-1; i >= 0; i--) {
				var e = ec.next();
				img = e["img"]["src"]?e["img"]["src"]:e["img"].title;

				document.getElementById("mercadolibre").innerHTML += "<a target=\"_blank\" href=\"" + e.url + "\">\
					<div class=\"product-box\">\
						<div class=\"product-image\" style=\"background-image:url('" + img + "');\"></div>\
						<div class=\"product-title\">" + e.title + "</div>\
						<div class=\"product-price\">$ " + e.price + "</div>\
					</div>\
				</a>";
			}
			ec.nextPage();
		}
		workSpace();
		</script>
	</head>
	<body>
		<div id="mercadolibre"></div>
	</body>
</html>
