<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf8" >
		<script src="JsObjectLists.js" ></script>
		<script src="MercadoLibre.JsObjectLists.js" ></script>
		<link rel="stylesheet" type="text/css" href="css/base.css" />
		<link rel="stylesheet" type="text/css" href="css/mercadolibre.css" />
		<script>

		async function workSpace () {
			var ml = new MercadoLibreObjectJsLists();
			var ec = await ml.search('zapatilla');
			var count = 0;
			var e;
			var img;

			do {
				while (e = ec.next()) {
					count++;
					e.img = e.img['src']?e.img['src']:e.img.title;

					document.getElementById("mercadolibre").innerHTML += "<a target=\"_blank\" href=\"" + e.url + "\">\
						<div class=\"product-box\">\
							<div class=\"product-image\" style=\"background-image:url('" + e.img + "');\"></div>\
							<div class=\"product-title\">" + e.title + "</div>\
							<div class=\"product-price\">$ " + e.price + "</div>\
						</div>\
					</a>";

				}
				
			} while ((ec = await ec.nextPage()) && (count < 1000));
			console.log(count);
		}
		workSpace();
		</script>
	</head>
	<body>
		<div id="mercadolibre"></div>
	</body>
</html>
